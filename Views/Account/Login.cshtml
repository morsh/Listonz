@model Listonz.Models.LoginPageModel

@{
    ViewBag.Title = "Log in";
}

<hgroup class="title">
    <h1>@ViewBag.Title.</h1>
</hgroup>

<section id="loginForm">

    <div id="viewLogin" class="view">
        @Html.Partial("LoginPartial")
        <div>
            Or <a href="Login#/Register">Register</a> if you don't have an account.
        </div>
        <div>
            Press @Html.ActionLink("here", "ForgotPassword") if you forgot your password.
        </div>
    </div>
    <div id="viewRegister" class="view">
        @Html.Partial("RegisterPartial")
    </div>
    <section class="social" id="socialLoginForm">
        @Html.Action("ExternalLoginsList", new { ReturnUrl = ViewBag.ReturnUrl })
    </section>
    @if (Request["Register"] != null)
    {
        <div>hello register</div>
    }
</section>
    
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    <script src="~/Scripts/jquery.passstrength.js"></script>
    <script>

        (function ($) {
            var app = $.sammy('#loginForm', function () {

                this.get("#/Login", function (context) {
                    $(".view").hide();
                    $("#viewLogin").show();
                });

                this.get("#/Register", function (context) {
                    $(".view").hide();
                    $("#viewRegister").show();
                });

            });

            $(function () {
                app.run('#/Login');
            });
        })(jQuery);

        $('#viewRegister input[type=password]').first().password_strength({
            minLength: 8,
            specialLength: 0
        });
    </script>

    @Scripts.Render("~/bundles/jqueryval")
}
